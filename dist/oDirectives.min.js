
!function(){"use strict";angular.module("envoc",["ui.bootstrap.pagination"]).value("defaultNamespace","root").value("namespacePropName","__namespace").config(["$httpProvider",function(e){e.interceptors.push("errorNamespacingHttpInterceptor"),e.interceptors.push("noCacheInterceptor")}])}();
angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse",function(e,t,a){var n=this,i={$setViewValue:angular.noop},r=t.numPages?a(t.numPages).assign:angular.noop;this.init=function(r,o){i=r,this.config=o,i.$render=function(){n.render()},t.itemsPerPage?e.$parent.$watch(a(t.itemsPerPage),function(t){n.itemsPerPage=parseInt(t,10),e.totalPages=n.calculateTotalPages()}):this.itemsPerPage=o.itemsPerPage},this.calculateTotalPages=function(){var t=this.itemsPerPage<1?1:Math.ceil(e.totalItems/this.itemsPerPage);return Math.max(t||0,1)},this.render=function(){e.page=parseInt(i.$viewValue,10)||1},e.selectPage=function(t){e.page!==t&&t>0&&t<=e.totalPages&&(i.$setViewValue(t),i.$render())},e.getText=function(t){return e[t+"Text"]||n.config[t+"Text"]},e.noPrevious=function(){return 1===e.page},e.noNext=function(){return e.page===e.totalPages},e.$watch("totalItems",function(){e.totalPages=n.calculateTotalPages()}),e.$watch("totalPages",function(t){r(e.$parent,t),e.page>t?e.selectPage(t):i.$render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(e,t){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@"},require:["pagination","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(a,n,i,r){function o(e,t,a){return{number:e,text:t,active:a}}function s(e,t){var a=[],n=1,i=t,r=angular.isDefined(u)&&t>u;r&&(c?(n=Math.max(e-Math.floor(u/2),1),i=n+u-1,i>t&&(i=t,n=i-u+1)):(n=(Math.ceil(e/u)-1)*u+1,i=Math.min(n+u-1,t)));for(var s=n;i>=s;s++){var l=o(s,s,s===e);a.push(l)}if(r&&!c){if(n>1){var g=o(n-1,"...",!1);a.unshift(g)}if(t>i){var p=o(i+1,"...",!1);a.push(p)}}return a}var l=r[0],g=r[1];if(g){var u=angular.isDefined(i.maxSize)?a.$parent.$eval(i.maxSize):t.maxSize,c=angular.isDefined(i.rotate)?a.$parent.$eval(i.rotate):t.rotate;a.boundaryLinks=angular.isDefined(i.boundaryLinks)?a.$parent.$eval(i.boundaryLinks):t.boundaryLinks,a.directionLinks=angular.isDefined(i.directionLinks)?a.$parent.$eval(i.directionLinks):t.directionLinks,l.init(g,t),i.maxSize&&a.$parent.$watch(e(i.maxSize),function(e){u=parseInt(e,10),l.render()});var p=l.render;l.render=function(){p(),a.page>0&&a.page<=a.totalPages&&(a.pages=s(a.page,a.totalPages))}}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("pager",["pagerConfig",function(e){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@"},require:["pager","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(t,a,n,i){var r=i[0],o=i[1];o&&(t.align=angular.isDefined(n.align)?t.$parent.$eval(n.align):e.align,r.init(o,e))}}}]);
!function(n){try{n=angular.module("envoc")}catch(a){n=angular.module("envoc",[])}n.run(["$templateCache",function(n){n.put("/oTemplates/datatables/oTableDefault.tmpl.html",'<div class="dataTables_wrapper form-inline" role="grid" ng-cloak>\n    <div class="row">\n        <div class="col-sm-6">\n            <div class="dataTables_length">\n                <div o-table-lines-per-page></div>\n            </div>\n        </div>\n        <div class="col-sm-6">\n            <div class="dataTables_filter pull-right">\n                <label>\n                    {{ctrl.lang.search}}:\n                    <input type="text" o-table-filter>\n                </label>\n            </div>\n        </div>\n    </div>\n\n    <div class="row"><div class="col-sm-12"><div o-table-page-info></div></div></div>\n\n    <div class="alert alert-info" ng-show="ctrl.loading">\n        <strong>{{ctrl.lang.loading}}</strong>\n    </div>\n\n    <div class="alert alert-info" ng-hide="ctrl.data.length || ctrl.loading">\n        <strong>{{ctrl.lang.noData}}</strong>\n    </div>\n\n    <div ng-transclude></div>\n\n    <div class="row" ng-show="ctrl.data.length">\n        <div class="col-sm-6">\n            <div o-table-page-info></div>\n        </div>\n        <div class="col-sm-6">\n            <div class="dataTables_paginate paging_bootstrap pull-right">\n                <div o-table-pagination></div>\n            </div>\n        </div>\n    </div>\n</div>')}])}();
!function(e){try{e=angular.module("envoc")}catch(l){e=angular.module("envoc",[])}e.run(["$templateCache",function(e){e.put("/oTemplates/datatables/oTableLinesPerPage.tmpl.html",'<label>\n    {{ctrl.lang.show}}\n    <select ng-model="ctrl.state.linesPerPage" ng-options="o for o in ctrl.linesPerPageOptions">\n    </select>\n    {{ctrl.lang.entries}}\n</label>')}])}();
!function(t){try{t=angular.module("envoc")}catch(a){t=angular.module("envoc",[])}t.run(["$templateCache",function(t){t.put("/oTemplates/datatables/oTablePageInfo.tmpl.html",'<span class="dataTables_info" ng-show="ctrl.data.length">\n    {{ctrl.state.pageStartIdx + 1}} - {{ctrl.state.pageStopIdx}}\n    {{ctrl.lang.of}} {{ctrl.state.iTotalDisplayRecords}}\n    {{ctrl.lang.entries}}\n    <span ng-show="ctrl.state.iTotalRecords !== ctrl.state.iTotalDisplayRecords">\n        ({{ctrl.lang.filteredFrom}} {{ctrl.state.iTotalRecords}})\n    </span>\n</span>')}])}();
!function(t){try{t=angular.module("envoc")}catch(e){t=angular.module("envoc",[])}t.run(["$templateCache",function(t){t.put("/oTemplates/datatables/oTablePagination.tmpl.html",'<div pagination total-items="ctrl.state.iTotalDisplayRecords" \n        items-per-page="ctrl.state.linesPerPage" \n        max-size="{{ctrl.paginationSettings.maxSize}}"\n        previous-text="{{ctrl.paginationSettings.previousText}}"\n        next-text="{{ctrl.paginationSettings.nextText}}"\n        ng-model="ctrl.state.currentPage"\n        ng-show="ctrl.data.length">\n</div>')}])}();
!function(e){try{e=angular.module("envoc")}catch(a){e=angular.module("envoc",[])}e.run(["$templateCache",function(e){e.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious(), previous: align}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext(), next: align}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n</ul>')}])}();
!function(e){try{e=angular.module("envoc")}catch(a){e=angular.module("envoc",[])}e.run(["$templateCache",function(e){e.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="boundaryLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(1)">{{getText(\'first\')}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active}"><a href ng-click="selectPage(page.number)">{{page.text}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n  <li ng-if="boundaryLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(totalPages)">{{getText(\'last\')}}</a></li>\n</ul>')}])}();
angular.module("envoc").filter("startFrom",function(){return function(n,r){return void 0===n?n:n.slice(+r)}});
angular.module("envoc").provider("oTableConfig",function(){function t(t,a){e.i18n[t]=a,e.defaultLang=t}var e={templates:{oTableLinesPerPageUrl:"/oTemplates/datatables/oTableLinesPerPage.tmpl.html",oTablePageInfoUrl:"/oTemplates/datatables/oTablePageInfo.tmpl.html",oTablePaginationUrl:"/oTemplates/datatables/oTablePagination.tmpl.html"},addLangConfig:t,i18n:{en:{show:"Show",entries:"entries",filteredFrom:"filtered from",search:"Search",loading:"Loading...",noData:"No data found...",of:"of",nextText:"Next",previousText:"Previous"}},defaultLang:"en"};return{config:e,addLangConfig:t,$get:function(){return e}}}).controller("oTableCtrl",["$scope","$http","$filter","$rootScope","$timeout","oTableConfig",function(t,e,a,r,n,o){function i(t){var e=t.lang||o.defaultLang;if(k.lang=o.i18n[e],angular.extend(N,t),k.paginationSettings=t.paginationSettings||k.lang,k.linesPerPageOptions=N.linesPerPageOptions,!N.dataSrcUrl&&!N.dataSrc&&!N.fetchMethod)throw new Error("A data source is required");N.dataSrcUrl&&!N.fetchMethod&&(N.fetchMethod=S),this.state={currentPage:1,linesPerPage:N.linesPerPage,iTotalRecords:0,iTotalDisplayRecords:0,allSearch:"",sortObj:{},sortOrder:[],searchObj:{}};try{var a;N.saveState&&(a=angular.fromJson(localStorage.getItem(N.saveState)),a&&(angular.extend(this.state,a),n(function(){r.$broadcast("oTable::internalStateChanged")})))}catch(i){console.log("unable to use saved state")}N.dataSrc?h():p()}function l(t){if(!k.waitForInitialSaveStateLoad){!k.fetch.called&&N.saveState&&(k.waitForInitialSaveStateLoad=angular.fromJson(localStorage.getItem(N.saveState)));var e=b();N.getAdditionalParams&&(e=angular.extend(e,N.getAdditionalParams())),t="boolean"==typeof t&&t,(t||!N.fetchMethod.last||angular.toJson(e)!=N.fetchMethod.last)&&(k.loading=null,n(function(){null==k.loading&&(k.loading=!0)},500),N.fetchMethod(e).then(O,x),N.fetchMethod.last=angular.toJson(e),k.fetch.called=!0)}}function s(t,e){var a=(k.state.lastSortShifted,k.state.sortObj[e]),n=angular.isDefined(a)?!k.state.sortObj[e]:!0;t||(k.state.sortObj={},k.state.sortOrder.length=0);var o=k.state.sortOrder.indexOf(e)>-1;o||k.state.sortOrder.push(e),k.state.sortObj[e]=n,k.state.lastSortShifted=t,r.$broadcast("oTable::sorting")}function c(t,e){N.propertyMap[e];k.state.searchObj[e]=t,t||delete k.state.searchObj[e],r.$broadcast("oTable::filtering")}function u(t){return{sorting:m(t),direction:v(t)}}function g(t){o.defaultLang=t,k.lang=o.i18n[t],k.paginationSettings=_.extend({},k.paginationSettings,k.lang)}function d(){k.fetch(!0)}function f(){var t=angular.copy(q);k.state.allSearch?(t=E(t,k.state.allSearch),k.state.iTotalDisplayRecords=t.length):k.state.iTotalDisplayRecords=q.length;var e=k.state.sortOrder.length>0;if(e){var a=k.state.sortOrder[0],r=k.state.sortObj[a]?"+":"-",n=r+a;t=J(t,n)}for(k.state.iTotalRecords=q.length,k.state.pageStartIdx=(k.state.currentPage-1)*k.state.linesPerPage,k.state.pageStartIdx<0&&(k.state.pageStartIdx=0);t.length&&k.state.pageStartIdx>=t.length;)k.state.currentPage--,L();k.data=R(U(t,k.state.pageStartIdx),k.state.linesPerPage),j(),N.saveState&&D()}function h(){R=a("limitTo"),E=a("filter"),U=a("startFrom"),J=a("orderBy"),q=N.dataSrc,f(),y(),r.$on("oTable::sorting",f),r.$on("oTable::filtering",f)}function p(){I(),r.$on("oTable::filtering",k.fetch)}function S(t){return e.post(N.dataSrcUrl,t)}function P(){return N.defaultSort.map(function(t,e){return{ColumnIndex:t[0],SortDirection:t[1],SearchTerm:t[2]||null}})}function b(){var t=k.state,e=angular.extend({},t.searchObj,t.sortObj),a={Skip:(t.currentPage-1)*t.linesPerPage,Take:t.linesPerPage,AllSearch:t.allSearch};return a.Columns=[],angular.forEach(e,function(e,r){var n=angular.isDefined(t.sortObj[r])?v(r):null,o=t.searchObj[r]||null,i=N.propertyMap[r];(n||o)&&a.Columns.push({ColumnIndex:i,SortDirection:n,SearchTerm:o})}),N.defaultSort.length&&!k.state.sortOrder.length&&(a.Columns=Array.prototype.concat.apply(a.Columns,P())),a}function m(t){return k.state.sortOrder.indexOf(t)>-1}function v(t){var e="";return m(t)&&(e=k.state.sortObj[t]?"asc":"desc"),e}function T(t){function e(t){function e(e,a){r[e]=t[a],N.propertyMap[e]=a}var r={};return a.forEach(e),r}N.propertyMap={};var a=t.sColumns.split(","),r=t.aaData.map(e);return r}function O(t){k.data=q=T(t.data),k.state.iTotalRecords=t.data.iTotalRecords,k.state.iTotalDisplayRecords=t.data.iTotalDisplayRecords,L(),j(),k.loading=!1,N.saveState&&(k.waitForInitialSaveStateLoad&&(k.state=F(k.state,k.waitForInitialSaveStateLoad)),D()),k.waitForInitialSaveStateLoad=!1}function x(){k.waitForInitialSaveStateLoad=!1,alert("Error fetching data")}function y(){t.$watch(C,f),t.$watch(w,f),t.$watch($,f),t.$watchCollection(A,f)}function I(){N.throttle>300&&(k.fetch=M(k.fetch,N.throttle)),t.$watch(b,k.fetch,!0)}function C(){return k.state.currentPage}function w(){return k.state.linesPerPage}function $(){return k.state.allSearch}function A(){return q}function L(){k.state.pageStartIdx=(k.state.currentPage-1)*k.state.linesPerPage}function j(){k.state.pageStopIdx=k.state.pageStartIdx+k.data.length}function D(){var t={time:+new Date,allSearch:"",currentPage:1,linesPerPage:N.linesPerPage};t=F(t,k.state);try{localStorage.setItem(N.saveState,angular.toJson(t))}catch(e){}}function M(t,e,a){e||(e=250);var r,n;return function(){var o=a||this,i=+new Date,l=arguments;r&&r+e>i?(clearTimeout(n),n=setTimeout(function(){r=i,t.apply(o,l)},e)):(r=i,t.apply(o,l))}}function F(t){var e=Object.keys(t),a=Array.prototype.slice.call(arguments,1),r={};a.unshift({});var n=angular.extend.apply({},a);return angular.forEach(e,function(e,a){angular.isDefined(n[e])?r[e]=n[e]:r[e]=t[e]}),r}var R,E,U,J,k=this,q=[],N={fetchMethod:null,linesPerPage:10,throttle:0,defaultSort:[],linesPerPageOptions:[5,10,25,50,100]};k.init=i,k.fetch=l,k.sortOn=s,k.columnFilter=c,k.getSortingPropertyInfo=u,k.api={refresh:d,setLang:g}}]).directive("oTable",function(){return{priority:800,restrict:"EA",scope:{config:"=",state:"=",exposeApiAs:"="},controller:"oTableCtrl",controllerAs:"oTableCtrl",compile:function(t,e,a){return function(t,e,a,r){r.init(t.config),t.state&&(t.state=r.state),a.exposeApiAs&&(t.exposeApiAs=r.api),e.addClass("o-table")}}}}).directive("oTableController",function(){return{restrict:"A",priority:1e3,scope:!0,require:"^oTable",link:function(t,e,a,r){var n=a.exposeAs||"ctrl";t[n]=r}}});
angular.module("envoc").directive("oTableDefault",function(){return{templateUrl:"/oTemplates/datatables/oTableDefault.tmpl.html",require:"^oTable",restrict:"EA",transclude:!0,scope:{},compile:function(t,e,a){return function(t,e,a,l){function n(){t.ctrl=l,t.$watch(r,o),e.find("table").addClass("table table-striped dataTable")}function r(){return l.data}function o(t,e,a){t&&t.length&&(a.rows=t)}n()}}}});
angular.module("envoc").directive("oTableFilter",function(){return{restrict:"A",scope:!0,require:"^oTable",link:function(e,n,t,l){function a(){e.$evalAsync(function(){l.state.allSearch=n.val()})}e.$on("oTable::internalStateChanged",function(){n.val(l.state.allSearch)}),n.on("keyup change",a)}}}).directive("oTableColumnFilter",function(){return{restrict:"A",scope:!0,require:"^oTable",link:function(e,n,t,l){function a(){e.$evalAsync(function(){l.columnFilter(n.val(),i)})}var i=t.field;n.on("keyup change",a)}}});
angular.module("envoc").directive("oTableLinesPerPage",["oTableConfig",function(e){return{restrict:"A",replace:!0,scope:!0,templateUrl:e.templates.oTableLinesPerPageUrl,require:"^oTable",link:function(e,r,l,a){e.ctrl=a}}}]);
angular.module("envoc").directive("oTablePageInfo",["oTableConfig",function(e){return{restrict:"A",replace:!0,scope:!0,templateUrl:e.templates.oTablePageInfoUrl,require:"^oTable",link:function(e,l,o,r){e.ctrl=r}}}]);
angular.module("envoc").directive("oTablePagination",["oTableConfig",function(e){return{restrict:"A",scope:!0,templateUrl:e.templates.oTablePaginationUrl,require:"^oTable",link:function(e,t,i,n){e.ctrl=n,e.ctrl.paginationSettings=angular.extend({maxSize:5,previousText:"Previous",nextText:"Next",directionLinks:!0,rotate:!0},e.ctrl.paginationSettings)}}}]);
angular.module("envoc").directive("oTableSort",function(){return{restrict:"A",scope:!0,require:"^oTable",link:function(e,n,o,t){function i(){window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}var c=o.field;n.addClass("sorting"),e.$on("oTable::sorting",function(){var e=t.getSortingPropertyInfo(c);angular.forEach(["sorting_asc","sorting_desc"],function(e){n.removeClass(e)}),e.sorting&&n.addClass("sorting_"+e.direction)}),n.on("click",function(n){i(),e.$evalAsync(function(){t.sortOn(n.shiftKey,c)})})}}});
!function(){"use strict";angular.module("envoc").service("apiClient",["$http","errorService","defaultNamespace","namespacePropName",function(e,n,t,a){function c(n,t){function c(e){var n="undefined"!=typeof e?e:{};return n[a]=u.nameSpace,n}var u=this,o=t,i=["get","head","delete","jsonp"],f=["post","put","patch"];u.nameSpace=n,u.bindNamespace=function(e){return new r(e,o)},i.forEach(function(n){u[n]=function(t,a){return e[n].call(e,t,c(a))}}),f.forEach(function(n){u[n]=function(t,a,r){return e[n].call(e,t,a,c(r))}})}var r=c;return new c(t,e)}])}();
!function(){"use strict";angular.module("envoc").factory("errorNamespacingHttpInterceptor",["$q","errorService","namespacePropName",function(r,e,n){return{request:function(r){return"undefined"!=typeof r[n]&&e.clearNamespace(r[n]),r},response:function(r){return r},responseError:function(t){var o=t.config[n];return"undefined"!=typeof o&&e.addErrors(o,t.data.errors),r.reject(t)}}}])}();
!function(){"use strict";angular.module("envoc").service("errorService",["$timeout",function(r){function e(){var e=this;e.errors={},e.clear=function(){e.errors={}},e.clearNamespace=function(r){e.errors[r]=[]},e.addErrors=function(n,c){r(function(){e.clearNamespace(n),e.errors[n]=c})}}return new e}])}();
!function(){"use strict";angular.module("envoc").factory("noCacheInterceptor",[function(){return{request:function(e){if("GET"==e.method&&-1==e.url.indexOf(".html")){var n=-1===e.url.indexOf("?")?"?":"&";e.url=e.url+n+"c="+(new Date).getTime()}return e}}}])}();
!function(){"use strict";angular.module("envoc").directive("validationClassFor",["errorService","defaultNamespace",function(r,e){return{restrict:"A",link:function(o,a,t){function n(r){var e=r[c]||{};_.some(e,s)?a.addClass("has-error"):a.removeClass("has-error")}function s(r){var e=t.validationClassFor.toLowerCase().split(" ");return _.some(e,function(e){return r.propertyName.toLowerCase()==e.toLowerCase()})}function i(){return r.errors}var c=t.namespace||e;o.$watch(i,n,!0)}}}])}();
!function(){"use strict";angular.module("envoc").directive("validationMessage",["errorService",function(e){return{restrict:"E",scope:{"for":"@",namespace:"@"},template:'<div ng-repeat="error in matches" class="help-block">{{error.errorMessage}}</div>\n',bindToController:!0,controllerAs:"validateCtrl",controller:["$scope","defaultNamespace",function(r,o){function t(e){var o=e[c.namespace]||{};r.matches=_.filter(o,n)}function n(e){return"undefined"!=typeof c["for"]?e.propertyName.toLowerCase()==c["for"].toLowerCase():!0}function a(){return e.errors}var c=this;c.namespace=c.namespace||o,r.$watch(a,t,!0)}]}}])}();