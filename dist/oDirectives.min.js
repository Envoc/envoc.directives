angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse",function(e,t,a){var n=this,i={$setViewValue:angular.noop},r=t.numPages?a(t.numPages).assign:angular.noop;this.init=function(r,o){i=r,this.config=o,i.$render=function(){n.render()},t.itemsPerPage?e.$parent.$watch(a(t.itemsPerPage),function(t){n.itemsPerPage=parseInt(t,10),e.totalPages=n.calculateTotalPages()}):this.itemsPerPage=o.itemsPerPage},this.calculateTotalPages=function(){var t=this.itemsPerPage<1?1:Math.ceil(e.totalItems/this.itemsPerPage);return Math.max(t||0,1)},this.render=function(){e.page=parseInt(i.$viewValue,10)||1},e.selectPage=function(t){e.page!==t&&t>0&&t<=e.totalPages&&(i.$setViewValue(t),i.$render())},e.getText=function(t){return e[t+"Text"]||n.config[t+"Text"]},e.noPrevious=function(){return 1===e.page},e.noNext=function(){return e.page===e.totalPages},e.$watch("totalItems",function(){e.totalPages=n.calculateTotalPages()}),e.$watch("totalPages",function(t){r(e.$parent,t),e.page>t?e.selectPage(t):i.$render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(e,t){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@"},require:["pagination","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(a,n,i,r){function o(e,t,a){return{number:e,text:t,active:a}}function s(e,t){var a=[],n=1,i=t,r=angular.isDefined(u)&&t>u;r&&(c?(n=Math.max(e-Math.floor(u/2),1),i=n+u-1,i>t&&(i=t,n=i-u+1)):(n=(Math.ceil(e/u)-1)*u+1,i=Math.min(n+u-1,t)));for(var s=n;i>=s;s++){var l=o(s,s,s===e);a.push(l)}if(r&&!c){if(n>1){var g=o(n-1,"...",!1);a.unshift(g)}if(t>i){var p=o(i+1,"...",!1);a.push(p)}}return a}var l=r[0],g=r[1];if(g){var u=angular.isDefined(i.maxSize)?a.$parent.$eval(i.maxSize):t.maxSize,c=angular.isDefined(i.rotate)?a.$parent.$eval(i.rotate):t.rotate;a.boundaryLinks=angular.isDefined(i.boundaryLinks)?a.$parent.$eval(i.boundaryLinks):t.boundaryLinks,a.directionLinks=angular.isDefined(i.directionLinks)?a.$parent.$eval(i.directionLinks):t.directionLinks,l.init(g,t),i.maxSize&&a.$parent.$watch(e(i.maxSize),function(e){u=parseInt(e,10),l.render()});var p=l.render;l.render=function(){p(),a.page>0&&a.page<=a.totalPages&&(a.pages=s(a.page,a.totalPages))}}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("pager",["pagerConfig",function(e){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@"},require:["pager","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(t,a,n,i){var r=i[0],o=i[1];o&&(t.align=angular.isDefined(n.align)?t.$parent.$eval(n.align):e.align,r.init(o,e))}}}]);
!function(a){try{a=angular.module("envoc.directives.partials")}catch(n){a=angular.module("envoc.directives.partials",[])}a.run(["$templateCache",function(a){a.put("/oTemplates/datatables/oTableDefault.tmpl.html",'<div class="dataTables_wrapper form-inline" role="grid" ng-cloak>\n    <div class="row">\n        <div class="span6 pull-left">\n            <div class="dataTables_length">\n                <div o-table-lines-per-page></div>\n            </div>\n        </div>\n        <div class="span6 pull-right">\n            <div class="dataTables_filter">\n                <label>\n                    Search:\n                    <input type="text" o-table-filter>\n                </label>\n            </div>\n        </div>\n    </div>\n\n    <div class="alert alert-info" ng-hide="ctrl.data.length">\n        <strong>No data found...</strong>\n    </div>\n\n    <div ng-transclude></div>\n\n    <div class="row" ng-show="ctrl.data.length">\n        <div class="span6 pull-left">\n            <div o-table-page-info></div>\n        </div>\n\n        <div class="span6 pull-right">\n            <div class="dataTables_paginate paging_bootstrap">\n                <div o-table-pagination></div>\n            </div>\n        </div>\n    </div>\n</div>\n')}])}();
!function(e){try{e=angular.module("envoc.directives.partials")}catch(n){e=angular.module("envoc.directives.partials",[])}e.run(["$templateCache",function(e){e.put("/oTemplates/datatables/oTableLinesPerPage.tmpl.html",'<label>\n    Show\n    <select ng-model="ctrl.state.linesPerPage">\n        <option value="5">5</option>\n        <option value="10">10</option>\n        <option value="25">25</option>\n        <option value="50">50</option>\n        <option value="100">100</option>\n    </select>\n    entries\n</label>')}])}();
!function(t){try{t=angular.module("envoc.directives.partials")}catch(a){t=angular.module("envoc.directives.partials",[])}t.run(["$templateCache",function(t){t.put("/oTemplates/datatables/oTablePageInfo.tmpl.html",'<span class="dataTables_info" ng-show="ctrl.data.length">\n    {{ctrl.state.pageStartIdx + 1}} - {{ctrl.state.pageStopIdx}}\n    of {{ctrl.state.iTotalDisplayRecords}}\n    entries\n    <span ng-show="ctrl.state.iTotalRecords !== ctrl.state.iTotalDisplayRecords">\n        (filtered from {{ctrl.state.iTotalRecords}})\n    </span>\n</span>')}])}();
!function(t){try{t=angular.module("envoc.directives.partials")}catch(e){t=angular.module("envoc.directives.partials",[])}t.run(["$templateCache",function(t){t.put("/oTemplates/datatables/oTablePagination.tmpl.html",'<div pagination total-items="ctrl.state.iTotalDisplayRecords" \n        items-per-page="ctrl.state.linesPerPage" \n        max-size="{{ctrl.paginationSettings.maxSize}}"\n        previous-text="{{ctrl.paginationSettings.previousText}}"\n        next-text="{{ctrl.paginationSettings.nextText}}"\n        ng-model="ctrl.state.currentPage"\n        ng-show="ctrl.data.length">\n</div>')}])}();
!function(e){try{e=angular.module("envoc.directives.partials")}catch(n){e=angular.module("envoc.directives.partials",[])}e.run(["$templateCache",function(e){e.put("/oTemplates/validation/oValidationMessageFor.tmpl.html",'﻿<div>\n    <!-- This is where the content of the tag gets replaced -->\n    <div ng-transclude></div>\n\n    <!-- Errors here -->\n    <ul class="list-unstyled" ng-show="matches.length" ng-class="{\'alert alert-danger\': matches.length}">\n        <li ng-repeat="error in matches">\n            <span class="field-validation-error">{{error.errorMessage}}</span>\n        </li>\n    </ul>\n</div>')}])}();
!function(e){try{e=angular.module("envoc.directives.partials")}catch(r){e=angular.module("envoc.directives.partials",[])}e.run(["$templateCache",function(e){e.put("/oTemplates/validation/oValidationMessageForModelstate.tmpl.html",'<div>\n    <!-- This is where the content of the tag gets replaced -->\n    <div ng-transclude></div>\n\n    <!-- Errors here -->\n    <ul class="list-unstyled" ng-show="matches.errors.length" ng-class="{\'alert alert-danger\': matches.errors.length}">\n        <li ng-repeat="error in matches.errors">\n            <span class="field-validation-error">{{error.errorMessage}}</span>\n        </li>\n    </ul>\n</div>')}])}();
!function(r){try{r=angular.module("envoc.directives.partials")}catch(e){r=angular.module("envoc.directives.partials",[])}r.run(["$templateCache",function(r){r.put("/oTemplates/validation/oValidationSummary.tmpl.html",'﻿<div ng-show="errors.length" ng-class="{\'alert alert-danger alert-block\': errors.length}">\n    <strong>Please fix the error{{ errors.length > 1 ? \'s\' : \'\'}} listed below and try again</strong>\n    <ul style="padding-left:30px">\n        <li ng-repeat="error in errors">\n            {{error.errorMessage}}\n        </li>\n    </ul>\n</div>\n')}])}();
!function(e){try{e=angular.module("envoc.directives.partials")}catch(a){e=angular.module("envoc.directives.partials",[])}e.run(["$templateCache",function(e){e.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious(), previous: align}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext(), next: align}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n</ul>')}])}();
!function(e){try{e=angular.module("envoc.directives.partials")}catch(a){e=angular.module("envoc.directives.partials",[])}e.run(["$templateCache",function(e){e.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="boundaryLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(1)">{{getText(\'first\')}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active}"><a href ng-click="selectPage(page.number)">{{page.text}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n  <li ng-if="boundaryLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(totalPages)">{{getText(\'last\')}}</a></li>\n</ul>')}])}();
!function(){"use strict";angular.module("envoc.directives",["envoc.directives.validation","envoc.directives.datatables"])}();
!function(){"use strict";angular.module("envoc.directives.validation",["envoc.directives.partials"])}();
!function(){"use strict";angular.module("envoc.directives.validation").directive("oValidateWith",[function(){return{restrict:"EA",controller:function(){},link:function(r,n,t,e){r.$watch(function(){return r.$eval(t.errors)},function(n){n&&(e.errors=r.$eval(t.errors))})}}}])}();
!function(){"use strict";angular.module("envoc.directives.validation").directive("oValidationMessageFor",[function(){return{restrict:"EA",require:"^oValidateWith",templateUrl:"/oTemplates/validation/oValidationMessageFor.tmpl.html",transclude:!0,scope:!0,link:function(e,t,o,r){function i(){return r.errors}var a=o.oValidationMessageFor.toLowerCase();e.$watch(i,function(t){t&&(e.matches=t.filter(function(e){return e.propertyName.toLowerCase()==a}))})}}}])}();
!function(){"use strict";angular.module("envoc.directives.validation").directive("oValidationMessageForModelstate",[function(){return{restrict:"EA",require:"^oValidateWith",templateUrl:"/oTemplates/validation/oValidationMessageForModelstate.tmpl.html",transclude:!0,scope:!0,link:function(t,e,a,i){function o(){return i.errors}var n=a.oValidationMessageForModelstate;t.$watch(o,function(e){e&&(t.matches=e[n])})}}}])}();
!function(){"use strict";angular.module("envoc.directives.validation").directive("oValidationSummary",[function(){return{restrict:"EA",require:"^oValidateWith",templateUrl:"/oTemplates/validation/oValidationSummary.tmpl.html",transclude:!0,scope:!0,link:function(t,i,r,e){function n(){return e.errors}t.$watch(n,function(i){t.errors=i})}}}])}();
!function(){"use strict";angular.module("envoc.directives.datatables",["envoc.directives.partials","ui.bootstrap.pagination"])}();
!function(){"use strict";var t=angular.module("envoc.directives.datatables");t.filter("startFrom",function(){return function(t,r){return void 0===t?t:t.slice(+r)}})}();
!function(){"use strict";var t=angular.module("envoc.directives.datatables");t.controller("oTableCtrl",["$scope","$http","$filter","$rootScope",function(t,e,a,r){function n(){var t=angular.copy(C);M.state.allSearch?(t=$(t,M.state.allSearch),M.state.iTotalDisplayRecords=t.length):M.state.iTotalDisplayRecords=C.length;var e=M.state.sortOrder.length>0;if(e){var a=M.state.sortOrder[0],r=M.state.sortObj[a]?"+":"-",n=r+a;t=x(t,n)}for(M.state.iTotalRecords=C.length,M.state.pageStartIdx=(M.state.currentPage-1)*M.state.linesPerPage;M.state.pageStartIdx>t.length;)M.state.currentPage--,O();M.data=y(j(t,M.state.pageStartIdx),M.state.linesPerPage),v()}function o(){y=a("limitTo"),$=a("filter"),j=a("startFrom"),x=a("orderBy"),C=R.dataSrc,n(),g(),r.$on("oTable::sorting",n),r.$on("oTable::filtering",n)}function s(){p(),r.$on("oTable::filtering",M.fetch)}function i(){return e.post(R.dataSrcUrl,c())}function c(){var t=M.state,e=angular.extend({},t.searchObj,t.sortObj),a={Skip:(t.currentPage-1)*t.linesPerPage,Take:t.linesPerPage,AllSearch:t.allSearch};return a.Columns=[],angular.forEach(e,function(e,r){var n=t.sortObj[r]?u(r):null,o=t.searchObj[r]||null,s=R.propertyMap[r];(n||o)&&a.Columns.push({ColumnIndex:s,SortDirection:n,SearchTerm:o})}),a}function l(t){return M.state.sortOrder.indexOf(t)>-1}function u(t){var e="";return l(t)&&(e=M.state.sortObj[t]?"asc":"desc"),e}function d(t){function e(t){function e(e,a){r[e]=t[a],R.propertyMap[e]=a}var r={};return a.forEach(e),r}R.propertyMap={};var a=t.sColumns.split(","),r=t.aaData.map(e);return r}function f(t){M.data=C=d(t.data),M.state.iTotalRecords=t.data.iTotalRecords,M.state.iTotalDisplayRecords=t.data.iTotalDisplayRecords,O(),v()}function h(){alert("Error fetching data")}function g(){t.$watch(S,n),t.$watch(b,n),t.$watch(P,n),t.$watchCollection(T,n)}function p(){R.throttle>300&&(M.fetch=m(M.fetch,R.throttle)),t.$watch(c,M.fetch,!0)}function S(){return M.state.currentPage}function b(){return M.state.linesPerPage}function P(){return M.state.allSearch}function T(){return C}function O(){M.state.pageStartIdx=(M.state.currentPage-1)*M.state.linesPerPage}function v(){M.state.pageStopIdx=M.state.pageStartIdx+M.data.length}function m(t,e,a){e||(e=250);var r,n;return function(){var o=a||this,s=+new Date,i=arguments;r&&r+e>s?(clearTimeout(n),n=setTimeout(function(){r=s,t.apply(o,i)},e)):(r=s,t.apply(o,i))}}var y,$,j,x,M=this,C=[],R={fetchMethod:null,linesPerPage:10,throttle:0};this.init=function(t){if(angular.extend(R,t),M.paginationSettings=t.paginationSettings||{},!R.dataSrcUrl&&!R.dataSrc&&!R.fetchMethod)throw new Error("A data source is required");R.dataSrcUrl&&(R.fetchMethod=i),this.state={currentPage:1,linesPerPage:R.linesPerPage,iTotalRecords:0,iTotalDisplayRecords:0,allSearch:"",sortObj:{},sortOrder:[],searchObj:{}},R.dataSrc?o():s()},this.fetch=function(){var t=c();R.getAdditionalParams&&(t=angular.extend(t,R.getAdditionalParams())),R.fetchMethod.last&&angular.toJson(t)==R.fetchMethod.last||(R.fetchMethod(t).then(f,h),R.fetchMethod.last=angular.toJson(t))},this.sortOn=function(t,e){var a=M.state.lastSortShifted,n=M.state.sortObj[e],o=a&&!t?!0:!n;t||(M.state.sortObj={},M.state.sortOrder.length=0);var s=M.state.sortOrder.indexOf(e)>-1;s||M.state.sortOrder.push(e),M.state.sortObj[e]=o,M.state.lastSortShifted=t,r.$broadcast("oTable::sorting")},this.columnFilter=function(t,e){R.propertyMap[e];M.state.searchObj[e]=t,t||delete M.state.searchObj[e],r.$broadcast("oTable::filtering")},this.getSortingPropertyInfo=function(t){return{sorting:l(t),direction:u(t)}}}]),t.directive("oTable",function(){return{priority:800,restrict:"EA",scope:{config:"=",state:"="},controller:"oTableCtrl",controllerAs:"oTableCtrl",compile:function(){return function(t,e,a,r){r.init(t.config),t.state&&(t.state=r.state),e.addClass("o-table")}}}}),t.directive("oTableController",function(){return{restrict:"A",priority:1e3,scope:!0,require:"^oTable",link:function(t,e,a,r){var n=a.exposeAs||"ctrl";t[n]=r}}})}();
!function(){"use strict";angular.module("envoc.directives.datatables").directive("oTableDefault",function(){return{templateUrl:"/oTemplates/datatables/oTableDefault.tmpl.html",require:"^oTable",restrict:"EA",transclude:!0,scope:{},compile:function(){return function(t,e,a,l){function n(){t.ctrl=l,t.$watch(r,c),e.find("table").addClass("table table-striped dataTable")}function r(){return l.data}function c(t,e,a){t&&t.length&&(a.rows=t)}n()}}}})}();
!function(){"use strict";var e=angular.module("envoc.directives.datatables");e.directive("oTableFilter",function(){return{restrict:"A",scope:!0,require:"^oTable",link:function(e,n,t,i){function c(){e.$evalAsync(function(){i.state.allSearch=n.val()})}n.on("keyup change",c)}}}),e.directive("oTableColumnFilter",function(){return{restrict:"A",scope:!0,require:"^oTable",link:function(e,n,t,i){function c(){e.$evalAsync(function(){i.columnFilter(n.val(),r)})}var r=t.field;n.on("keyup change",c)}}})}();
!function(){"use strict";var e=angular.module("envoc.directives.datatables");e.directive("oTableLinesPerPage",function(){return{restrict:"A",replace:!0,scope:!0,templateUrl:"/oTemplates/datatables/oTableLinesPerPage.tmpl.html",require:"^oTable",link:function(e,t,a,r){e.ctrl=r}}})}();
!function(){"use strict";var e=angular.module("envoc.directives.datatables");e.directive("oTablePageInfo",function(){return{restrict:"A",replace:!0,scope:!0,templateUrl:"/oTemplates/datatables/oTablePageInfo.tmpl.html",require:"^oTable",link:function(e,t,a,l){e.ctrl=l}}})}();
!function(){"use strict";var t=angular.module("envoc.directives.datatables");t.directive("oTablePagination",function(){return{restrict:"A",scope:!0,templateUrl:"/oTemplates/datatables/oTablePagination.tmpl.html",require:"^oTable",link:function(t,e,i,a){t.ctrl=a,t.ctrl.paginationSettings=angular.extend({maxSize:5,previousText:"Previous",nextText:"Next",directionLinks:!0,rotate:!0},t.ctrl.paginationSettings)}}})}();
!function(){"use strict";var e=angular.module("envoc.directives.datatables");e.directive("oTableSort",function(){return{restrict:"A",scope:!0,require:"^oTable",link:function(e,n,t,o){function i(){window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}var c=t.field;n.addClass("sorting"),e.$on("oTable::sorting",function(){var e=o.getSortingPropertyInfo(c);angular.forEach(["sorting_asc","sorting_desc"],function(e){n.removeClass(e)}),e.sorting&&n.addClass("sorting_"+e.direction)}),n.on("click",function(n){i(),e.$evalAsync(function(){o.sortOn(n.shiftKey,c)})})}}})}();